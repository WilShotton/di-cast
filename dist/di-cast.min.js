!function(a){"use strict";function b(){function a(){var a={name:"anon",target:null,using:[],resolver:null,api:[],Builder:null,isSingleton:!1,defer:!1};return B.call(arguments).forEach(function(b){Object.keys(b).forEach(function(c){null!=b[c]&&(a[c]=b[c])})}),a}function b(a,b){return-1!==Object.prototype.toString.call(a).split(" ")[1].toLowerCase().indexOf(b.toLowerCase())}function c(a,c,d){if(!b(a,c))throw new TypeError(d)}function d(a,b){var c=(new Error).stack;this.stack=a.message.concat("\n",null!=c?c.split("\n").slice(1).join("\n"):""),this.message="".concat(a.message.toUpperCase(),": ",a.info.replace(/\{\{(\w+)\}\}/g,function(a,c){return b[c]}))}function e(a){return a.api.forEach(function(b){if(null==a.instance[b.name])throw new d(q,b);if(b.hasOwnProperty("arity")&&a.instance[b.name].length!==b.arity)throw new d(r,b)}),a}function f(a){return a.using.forEach(function(b){a.instance[b]=a.injector.get(b)}),a}function g(a){return b(a.instance.postConstruct,"Function")&&a.instance.postConstruct(a.injector),a}function h(a){function b(b){return a.apply(this,b)}return b.prototype=Object.create(a.prototype),b}function i(a){var c=[];if(b(a,"Object"))for(var d in a)a[d]===A&&(c[c.length]=d);return c}function j(a){return a.hasOwnProperty("instance")&&a.isSingleton||(a.instance=new a.Builder(a.using.map(function(b){return a.injector.get(b)})),e(a)),a.instance}function k(a){if(!(a.hasOwnProperty("instance")&&a.isSingleton||(a.instance=a.target.apply(null,a.using.map(function(b){return a.injector.get(b)})),null!=a.instance)))throw new d(s,{name:a.name});return a.instance}function l(a){if(!a.hasOwnProperty("instance")){var b=a.target.split(".");a.instance=b.reduce(function(a,b){return a[b]},a.injector.get(b.shift()))}return a.instance}function m(a){return a.hasOwnProperty("instance")||(a.instance=a.target,g(f(e(a)))),a.instance}function n(b){function e(b){this.toFactory=function(d){return c(d,"Object",p),c(d.target,"Function",v),n[b]=a(d,{injector:f,name:b,resolver:k}),f},this.toLens=function(d){return c(d,"Object",p),c(d.target,"String",v),n[b]=a(d,{injector:f,name:b,resolver:l}),f},this.toType=function(d){return c(d,"Object",p),c(d.target,"Function",v),n[b]=a(d,{injector:f,name:b,resolver:j,Builder:h(d.target)}),f},this.toValue=function(e){if(c(e,"Object",p),!e.hasOwnProperty("target"))throw new d(y,{key:b});return n[b]=a(e,{injector:f,name:b,resolver:m,using:i(e.target)}),f}}var f=this,g=[],n={injector:{name:"injector",resolver:m,target:f,using:[],api:[]}};if(b&&b.constructor!==this.constructor)throw new Error(u);this.map=function(a){if(c(a,"string",t),n.hasOwnProperty(a))throw new d(w,{key:a});return new e(a)},this.has=function(a,d){return c(a,"String",t),d?n.hasOwnProperty(a)||!1:n.hasOwnProperty(a)||b&&b.has(a)||!1},this.get=function(a){var c=null,e=a.split("."),h=e[0],i=e.slice(1);if(!f.has(h))throw new d(z,{key:h});if(-1!==g.indexOf(h))throw g.push(h),new d(o,{target:h});return g.push(h),c=n.hasOwnProperty(h)?n[h].defer&&b.has(h)?b.get(h):n[h].resolver(n[h]):b.get(h),g.pop(),i.reduce(function(a,b){return a[b]},c)},this.remove=function(a){var b=null;if(f.has(a)){for(var c in n)if(n.hasOwnProperty(c)&&c!==a&&-1!==n[c].using.indexOf(a))throw new d(x,{key:a});b=n[a].target,delete n[a]}return b},this.resolveFactory=function(b){return c(b,"Function",v),k(a({injector:f,target:b,using:B.call(arguments,1)}))},this.resolveLens=function(b){return c(b,"String",v),l(a({injector:f,target:b}))},this.resolveType=function(b){return c(b,"Function",v),j(a({injector:f,target:b,using:B.call(arguments,1),Builder:h(b)}))},this.resolveValue=function(b){return c(b,"Object",v),m(a({injector:f,target:b,using:i(b)}))}}var o={message:"Circular dependency",info:"{{target}} has a dependency that depends on {{target}}"},p="Incorrect method signature",q={message:"Interface missing member",info:"The mapping must have a member called {{name}}"},r={message:"Interface method with arity mismatch",info:"The method signature for {{name}} requires {{arity}} arguments"},s={message:"Invalid factory",info:"{{name}} must return a value"},t="The key must be a String",u="The parent injector must be an injector",v="The target must be an Object or Function",w={message:"Mapping exists",info:"The mapping {{key}} is already in use"},x={message:"Mapping has dependants",info:"{{key}} could not be removed as other mapping depend on it"},y={message:"Missing target",info:"The mapping for {{key}} must have a target property"},z={message:"No mapping",info:"No mapping for [{{key}}] found"},A="{I}",B=Array.prototype.slice;return d.prototype=new Error,d.prototype.name="InjectionError",d.prototype.constructor=d,n}"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b():a.DiCast=b()}(this);
//# sourceMappingURL=di-cast.min.map