!function(a){"use strict";function b(){function a(){var a={name:"anon",target:null,using:[],resolver:null,api:[],Builder:null,isSingleton:!1};return A.call(arguments).forEach(function(b){Object.keys(b).forEach(function(c){null!=b[c]&&(a[c]=b[c])})}),a}function b(a,b){return-1!==Object.prototype.toString.call(a).split(" ")[1].toLowerCase().indexOf(b.toLowerCase())}function c(a,c,d){if(!b(a,c))throw new TypeError(d)}function d(a,b){var c=(new Error).stack;this.stack=a.message.concat("\n",null!=c?c.split("\n").slice(1).join("\n"):""),this.message=a.message,this.info=a.info.replace(/\{\{(\w+)\}\}/g,function(a,c){return b[c]})}function e(a){return a.api.forEach(function(b){if(null==a.instance[b.name])throw new d(v,b);if(b.hasOwnProperty("arity")&&a.instance[b.name].length!==b.arity)throw new d(w,b)}),a}function f(a){return a.using.forEach(function(b){a.instance[b]=a.injector.get(b)}),a}function g(a){return b(a.instance.postConstruct,"Function")&&a.instance.postConstruct(a.injector),a}function h(a){function b(b){return a.apply(this,b)}return b.prototype=Object.create(a.prototype),b}function i(a){var c=[];if(b(a,"Object"))for(var d in a)a[d]===z&&(c[c.length]=d);return c}function j(a){return a.hasOwnProperty("instance")&&a.isSingleton||(a.instance=new a.Builder(a.using.map(function(b){return a.injector.get(b)})),e(a)),a.instance}function k(a){if(!(a.hasOwnProperty("instance")&&a.isSingleton||(a.instance=a.target.apply(null,a.using.map(function(b){return a.injector.get(b)})),null!=a.instance)))throw new d(x,{name:a.name});return a.instance}function l(a){return a.hasOwnProperty("instance")||(a.instance=a.target,g(f(e(a)))),a.instance}function m(b){var e=this,f=[],g={injector:{name:"injector",resolver:l,target:e,using:[],api:[]}};if(b&&b.constructor!==this.constructor)throw new Error(n);this.map=function(b){function f(){this.toFactory=function(d){return c(d,"Object",p),c(d.target,"Function",o),g[b]=a(d,{injector:e,name:b,resolver:k}),e},this.toType=function(d){return c(d,"Object",p),c(d.target,"Function",o),g[b]=a(d,{injector:e,name:b,resolver:j,Builder:h(d.target)}),e},this.toValue=function(f){if(c(f,"Object",p),!f.hasOwnProperty("target"))throw new d(r,{key:b});return g[b]=a(f,{injector:e,name:b,resolver:l,using:i(f.target)}),e}}if(c(b,"string",q),g.hasOwnProperty(b))throw new d(s,{key:b});return new f},this.has=function(a){return c(a,"String",q),g.hasOwnProperty(a)||b&&b.has(a)||!1},this.get=function(a){var c=null;if(!e.has(a))throw new d(t,{key:a});if(-1!==f.indexOf(a))throw f.push(a),new d(y,{target:a});return f.push(a),c=g.hasOwnProperty(a)?g[a].resolver(g[a]):b.get(a),f.pop(),c},this.remove=function(a){var b=null;if(e.has(a)){for(var c in g)if(g.hasOwnProperty(c)&&c!==a&&-1!==g[c].using.indexOf(a))throw new d(u,{key:a});b=g[a].target,delete g[a]}return b},this.resolveFactory=function(b){return c(b,"Function",o),k(a({injector:e,target:b,using:A.call(arguments,1)}))},this.resolveType=function(b){return c(b,"Function",o),j(a({injector:e,target:b,using:A.call(arguments,1),Builder:h(b)}))},this.resolveValue=function(b){return c(b,"Object",o),l(a({injector:e,target:b,using:i(b)}))}}var n="The parent injector must be an injector",o="The target must be an Object or Function",p="Incorrect method signature supplied",q="The key must be a String",r={message:"The target must be specified",info:"The mapping for {{key}} must have a target property"},s={message:"A mapping already exists",info:"The mapping {{key}} is already in use"},t={message:"No mapping found",info:"No mapping for [{{key}}] found"},u={message:"The mapping has dependants",info:"{{key}} could not be removed as other mapping depend on it"},v={message:"The mapping is missing a required member",info:"The mapping must have a member called {{name}}"},w={message:"The mapping has an interface method with an incorrect arity",info:"The method signature for {{name}} requires {{arity}} arguments"},x={message:"The factory function must return a value",info:"{{name}} must return a value"},y={message:"Can not resolve a circular dependency",info:"{{target}} has a dependency that depends on {{target}}"},z="{I}",A=Array.prototype.slice;return d.prototype=new Error,d.prototype.name="InjectionError",d.prototype.constructor=d,m}var c=[];"function"==typeof define&&define.amd?define(c,b):"undefined"!=typeof module&&module.exports?module.exports=b.apply(b,c.map(function(a){return require(a)})):a.DiCast=b.apply(b,c.map(function(b){return a[b]}))}(this);