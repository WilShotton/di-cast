!function(a){"use strict";function b(){function a(){var a={name:"anon",target:null,using:[],resolver:null,api:[],Builder:null,isSingleton:!1};return A.call(arguments).forEach(function(b){Object.keys(b).forEach(function(c){null!=b[c]&&(a[c]=b[c])})}),a}function b(a,b){return-1!==Object.prototype.toString.call(a).split(" ")[1].toLowerCase().indexOf(b.toLowerCase())}function c(a,c,d){if(!b(a,c))throw new TypeError(d)}function d(a,b){var c=(new Error).stack;this.stack=a.message.concat("\n",null!=c?c.split("\n").slice(1).join("\n"):""),this.message="".concat(a.message.toUpperCase(),": ",a.info.replace(/\{\{(\w+)\}\}/g,function(a,c){return b[c]}))}function e(a){return a.api.forEach(function(b){if(null==a.instance[b.name])throw new d(p,b);if(b.hasOwnProperty("arity")&&a.instance[b.name].length!==b.arity)throw new d(q,b)}),a}function f(a){return a.using.forEach(function(b){a.instance[b]=a.injector.get(b)}),a}function g(a){return b(a.instance.postConstruct,"Function")&&a.instance.postConstruct(a.injector),a}function h(a){function b(b){return a.apply(this,b)}return b.prototype=Object.create(a.prototype),b}function i(a){var c=[];if(b(a,"Object"))for(var d in a)a[d]===z&&(c[c.length]=d);return c}function j(a){return a.hasOwnProperty("instance")&&a.isSingleton||(a.instance=new a.Builder(a.using.map(function(b){return a.injector.get(b)})),e(a)),a.instance}function k(a){if(!(a.hasOwnProperty("instance")&&a.isSingleton||(a.instance=a.target.apply(null,a.using.map(function(b){return a.injector.get(b)})),null!=a.instance)))throw new d(r,{name:a.name});return a.instance}function l(a){return a.hasOwnProperty("instance")||(a.instance=a.target,g(f(e(a)))),a.instance}function m(b){function e(b){this.toFactory=function(d){return c(d,"Object",o),c(d.target,"Function",u),m[b]=a(d,{injector:f,name:b,resolver:k}),f},this.toType=function(d){return c(d,"Object",o),c(d.target,"Function",u),m[b]=a(d,{injector:f,name:b,resolver:j,Builder:h(d.target)}),f},this.toValue=function(e){if(c(e,"Object",o),!e.hasOwnProperty("target"))throw new d(x,{key:b});return m[b]=a(e,{injector:f,name:b,resolver:l,using:i(e.target)}),f}}var f=this,g=[],m={injector:{name:"injector",resolver:l,target:f,using:[],api:[]}};if(b&&b.constructor!==this.constructor)throw new Error(t);this.map=function(a){if(c(a,"string",s),m.hasOwnProperty(a))throw new d(v,{key:a});return new e(a)},this.has=function(a){return c(a,"String",s),m.hasOwnProperty(a)||b&&b.has(a)||!1},this.get=function(a){var c=null;if(!f.has(a))throw new d(y,{key:a});if(-1!==g.indexOf(a))throw g.push(a),new d(n,{target:a});return g.push(a),c=m.hasOwnProperty(a)?m[a].resolver(m[a]):b.get(a),g.pop(),c},this.remove=function(a){var b=null;if(f.has(a)){for(var c in m)if(m.hasOwnProperty(c)&&c!==a&&-1!==m[c].using.indexOf(a))throw new d(w,{key:a});b=m[a].target,delete m[a]}return b},this.resolveFactory=function(b){return c(b,"Function",u),k(a({injector:f,target:b,using:A.call(arguments,1)}))},this.resolveType=function(b){return c(b,"Function",u),j(a({injector:f,target:b,using:A.call(arguments,1),Builder:h(b)}))},this.resolveValue=function(b){return c(b,"Object",u),l(a({injector:f,target:b,using:i(b)}))}}var n={message:"Circular dependency",info:"{{target}} has a dependency that depends on {{target}}"},o="Incorrect method signature",p={message:"Interface missing member",info:"The mapping must have a member called {{name}}"},q={message:"Interface method with arity mismatch",info:"The method signature for {{name}} requires {{arity}} arguments"},r={message:"Invalid factory",info:"{{name}} must return a value"},s="The key must be a String",t="The parent injector must be an injector",u="The target must be an Object or Function",v={message:"Mapping exists",info:"The mapping {{key}} is already in use"},w={message:"Mapping has dependants",info:"{{key}} could not be removed as other mapping depend on it"},x={message:"Missing target",info:"The mapping for {{key}} must have a target property"},y={message:"No mapping",info:"No mapping for [{{key}}] found"},z="{I}",A=Array.prototype.slice;return d.prototype=new Error,d.prototype.name="InjectionError",d.prototype.constructor=d,m}var c=[];"function"==typeof define&&define.amd?define(c,b):"undefined"!=typeof module&&module.exports?module.exports=b.apply(b,c.map(function(a){return require(a)})):a.DiCast=b.apply(b,c.map(function(b){return a[b]}))}(this);
//# sourceMappingURL=di-cast.min.map