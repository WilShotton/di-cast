!function(a){"use strict";function b(){function a(a,b){return-1!==Object.prototype.toString.call(a).split(" ")[1].toLowerCase().indexOf(b.toLowerCase())}function b(b,c,d){if(!a(b,c))throw new TypeError(d)}function c(c){function d(a){if(b(a,"function",e),null!==k)throw new Error(h)}function f(a){if(null===m.props){m.props=[];for(var b in a)0===b.indexOf("i_")&&m.props.push(b)}return m.props}function i(a){var b=new a(l.call(arguments,1));return f(b).forEach(function(a){null==b[a]&&(b[a]=c.getMappingFor(a.replace("i_","")))}),null!=b.postConstruct&&b.postConstruct(),b}var j=!1,k=null,m={args:[],props:null},n=null;this.toFactory=function(a){function b(){function b(a){return d.apply(this,a)}var d=a.apply(a,m.args.map(function(a){return c.getMappingFor(a)}));return b.prototype=d.prototype,b}function e(a){var b=i(a);return{make:function(){return i.apply(this,[a].concat(l.call(arguments,0)))},name:b.constructor.name,type:b.constructor}}var f=null;return d(a),n=a,k=function(){return f||(f=e(b()))},this},this.toType=function(a){function b(){return a.apply(this,m.args.map(function(a){return c.getMappingFor(a)}))}var e=null;return d(a),b.prototype=a.prototype,n=a,k=function(){return j&&null===e&&(e=i(b)),e||i(b)},this},this.toValue=function(a){return m.props=[],n=a,k=function(){return a},this},this.using=function(){return arguments.length>0&&arguments[0]&&(m.args=a(arguments[0],"Array")?arguments[0]:l.call(arguments,0)),this},this.asSingleton=function(){return j=!0,this},this.resolve=function(){return b(k,"function",g),k()},this.injector=function(){return c},this.dependsOn=function(a){return null===m.props&&k(),m.args.indexOf(a)>-1||m.props.indexOf("i_"+a)>-1},this.destroy=function(){var a=n;return m.args.length=0,m.props.length=0,k=null,n=null,a}}function d(){function a(a){if(b(a,"string",f),d.hasMappingFor(a))throw new Error(h)}var d=this,e={};this.map=function(b){return a(b),e[b]=new c(d)},this.unMap=function(a){var b=null;return d.hasMappingFor(a)&&(Object.keys(e).forEach(function(b){if(e[b].dependsOn(a))throw new Error(j)}),b=e[a].destroy(),delete e[a]),b},this.hasMappingFor=function(a){return e.hasOwnProperty(a)},this.getMappingFor=function(a){if(b(a,"string",f),!d.hasMappingFor(a))throw new Error(i);return e[a].resolve()},this.resolveFactory=function(a){return b(a,"Function",k),new c(d).toFactory(a).using(l.call(arguments,1)).resolve()},this.resolveType=function(a){return b(a,"Function",k),new c(d).toType(a).using(l.call(arguments,1)).resolve()},this.resolveValue=function(a){return b(a,"Object",k),new c(d).toValue(a).resolve()}}var e="[#001] The mapping must be a function",f="[#002] The key must be a String",g="[#003] No resolver found",h="[#004] A mapping already exists",i="[#005] No mapping found",j="[#006] The mapping has dependants",k="[#007] The resolve target must be an Object or Function",l=Array.prototype.slice;return d}var c=[];"function"==typeof define&&define.amd?define(c,b):"undefined"!=typeof module&&module.exports?module.exports=b.apply(b,c.map(function(a){return require(a)})):a.Injector=b.apply(b,c.map(function(b){return a[b]}))}(this);