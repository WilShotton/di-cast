!function(a){"use strict";function b(){function a(a){return a}function b(a,b){return-1!==Object.prototype.toString.call(a).split(" ")[1].toLowerCase().indexOf(b.toLowerCase())}function c(a,c,d){if(!b(a,c))throw new TypeError(d)}function d(a,b){this.name="InjectionError",this.message=a.message,this.info=a.info.replace(/\{\{(\w+)\}\}/g,function(a,c){return b[c]})}function e(){function e(a){if(c(a,"string",h),x.has(a))throw new d(j,{key:a})}function q(a,b){b.forEach(function(b){if(null==a[b.name])throw new d(m,b);if(b.hasOwnProperty("arity")&&a[b.name].length!==b.arity)throw new d(n,b)})}function r(a,b){if(!b.hasOwnProperty("props")){b.props=[];for(var c in a)a[c]===o&&(b.props[b.props.length]=c)}return b.props}function s(a){var c=new a.Builder(p.call(arguments,1));return q(c,a.api),r(c,a).forEach(function(a){c[a]=x.get(a)}),b(c.postConstruct,"Function")&&c.postConstruct(x),c}function t(a){function b(){return a.Factory=a.target.apply(a.target,a.args.map(function(a){return x.get(a)})),a.Builder=function(b){return a.Factory.apply(this,b)},a.Builder.prototype=a.Factory.prototype,a.instance={make:function(){return s.apply(this,[a].concat(p.call(arguments,0)))}},a.instance}return a.instance||b()}function u(a){return a.hasOwnProperty("Builder")||(a.Builder=function(){return a.target.apply(this,a.args.map(function(a){return x.get(a)}))},a.Builder.prototype=a.target.prototype),a.isSingleton&&!a.hasOwnProperty("instance")&&(a.instance=s(a)),a.instance||s(a)}function v(a){if(!a.processed){a.processed=!0,q(a.target,a.api),a.props=[];for(var b in a.target)a.target[b]===o&&(a.props[a.props.length]=b,a.target[b]=x.get(b))}return a.target}function w(b){for(var c=/([\w\$'"]*)(?=\s*[:=]\s*(?:'|"){I}(?:"|'))/g,d="".concat(b.toString(),JSON.stringify(b.prototype));null!=b;)d+=JSON.stringify(Object.getPrototypeOf(b)),b=b.prototype;return console.log(" str :: "+d),(d.match(c)||[]).filter(a).map(function(a){return a.replace(/["']/g,"")})}var x=this,y={injector:{target:x,resolver:v,api:[]}};this.map=function(a){return e(a),{toFactory:function(b){return c(b,"Object",g),c(b.target,"Function",f),y[a]={resolver:t,target:b.target,api:b.api||[],args:b.using||[]},x},toType:function(b){return c(b,"Object",g),c(b.target,"Function",f),y[a]={resolver:u,target:b.target,api:b.api||[],args:b.using||[],isSingleton:b.isSingleton||!1,props:w(b.target)},x},toValue:function(b){if(c(b,"Object",g),!b.hasOwnProperty("target"))throw new d(i,{key:a});return y[a]={resolver:v,target:b.target,api:b.api||[]},x}}},this.has=function(a){return c(a,"String",h),y.hasOwnProperty(a)},this.get=function(a){if(!x.has(a))throw new d(k,{key:a});return y[a].resolver(y[a])},this.remove=function(a){var b=null;return x.has(a)&&(Object.keys(y).filter(function(b){return b!==a}).map(function(a){return y[a]}).forEach(function(b){if(b.hasOwnProperty("args")&&-1!==b.args.indexOf(a))throw new d(l,{key:a});if(b.hasOwnProperty("props")||b.resolver(b).hasOwnProperty("make")&&b.instance.make(),-1!==b.props.indexOf(a))throw new d(l,{key:a})}),b=y[a].target,delete y[a]),b},this.resolveFactory=function(a){return c(a,"Function",f),t({target:a,args:p.call(arguments,1),api:[]})},this.resolveType=function(a){return c(a,"Function",f),u({target:a,args:p.call(arguments,1),isSingleton:!1,api:[]})},this.resolveValue=function(a){return c(a,"Object",f),v({target:a,api:[]})}}var f="The target must be an Object or Function",g="Incorrect method signature supplied",h="The key must be a String",i={message:"The target must be specified",info:"The mapping for {{key}} must have a target property"},j={message:"A mapping already exists",info:"The mapping {{key}} is already in use"},k={message:"No mapping found",info:"No mapping for {{key}} found"},l={message:"The mapping has dependants",info:"{{key}} could not be removed as other mapping depend on it"},m={message:"The mapping is missing a required member",info:"The mapping must have a member called {{name}}"},n={message:"The mapping has an interface method with an incorrect arity",info:"The method signature for {{name}} requires {{arity}} arguments"},o="{I}",p=Array.prototype.slice;return d.prototype=new Error,d.prototype.constructor=d,e}var c=[];"function"==typeof define&&define.amd?define(c,b):"undefined"!=typeof module&&module.exports?module.exports=b.apply(b,c.map(function(a){return require(a)})):a.Injector=b.apply(b,c.map(function(b){return a[b]}))}(this);